#!/usr/bin/env bash
# This script installs and configures Nginx on an Ubuntu server to serve "Hello World!" on port 80.

# Ensure the script is run as root
if [ "$(id -u)" -ne 0 ]; then
    echo "This script must be run as root."
    exit 1
fi

# Update package list and install Nginx
apt-get update -y
apt-get install -y nginx

# Configure Nginx to serve "Hello World!"
echo "Hello World!" > /var/www/html/index.html

# Start Nginx using init.d (systemctl is not allowed)
service nginx start

# Ensure Nginx is running
if ! service nginx status > /dev/null; then
    echo "Nginx failed to start."
    exit 1
fi

# Reload Nginx to apply any changes
service nginx reload
